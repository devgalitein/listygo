!function(e){function t(){var t=e(".rtcl-booking-type .rtcl-radio-field input[type=radio]:checked"),i=t.val(),n=t.closest(".rtcl-booking-holder"),c=n.find(".rtcl-booking-service-fields"),o=n.find(".rtcl-booking-event-fields"),l=n.find(".rtcl-booking-rent-fields"),a=n.find(".rtcl-booking-pre-order-fields");switch(i){case"event":default:c.slideUp(),l.slideUp(),a.slideUp(),o.slideDown();break;case"services":l.slideUp(),o.slideUp(),a.slideUp(),c.slideDown();break;case"rent":c.slideUp(),o.slideUp(),a.slideUp(),l.slideDown();break;case"pre_order":l.slideUp(),o.slideUp(),c.slideUp(),a.slideDown()}}function i(t,i){if("time"===i){var n,c,o={autoUpdateInput:!1,singleDatePicker:!0,timePicker:!0,timePicker24Hour:/H|HH/.test((null===(n=rtcl_booking.timePicker)||void 0===n||null===(n=n.locale)||void 0===n?void 0:n.format)||"hh:mm A"),timePickerIncrement:1},l=t.name;if(l&&l.includes("[end]")){var a={};a=rtcl_booking.timePickerEnd&&Object.keys(rtcl_booking.timePickerEnd).length?Object.assign({},rtcl_booking.timePicker,rtcl_booking.timePickerEnd||{}):rtcl_booking.timePicker,c=Object.assign({},o,a||{})}else c=Object.assign({},o,rtcl_booking.timePicker||{});e(t).daterangepicker(c).on("show.daterangepicker",(function(e,t){t.container.find(".calendar-table").hide()}))}e(t).on("apply.daterangepicker",(function(t,i){e(this).val(i.startDate.format(i.locale.format))})).on("cancel.daterangepicker",(function(t,i){e(this).val("")}))}function n(t){var i=e("#rtcl_booking.rtcl"),n={action:"rtcl_booking_fields_listings",term_id:t};e.ajax({url:rtcl.ajaxurl,data:n,type:"POST",dataType:"json",beforeSend:function(){i.show()},success:function(e){e.hide?i.hide():i.show()},error:function(e){console.log(e.responseText)}})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.getElementById("rtclBookingCalendar");t&&(new FullCalendar.Calendar(t,{initialView:"dayGridMonth",height:500,locale:rtcl_booking.locale,contentHeight:"auto",datesSet:function(){o(e)}}).render(),o(e))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e(".fc-scrollgrid-sync-table tbody tr").each((function(i){var n=e(this);e("td",n).each((function(i){var n=e(this),c=n.data("date");t.includes(c)&&n.addClass("disable")}))}))}t(),e(document).ready((function(){var o=[],l=e("#rent_unavailable_date");l.length&&(o=l.val().split(",")),e(".rtcl-booking-type").on("change",".rtcl-radio-field input[type=radio]",(function(){e(this);t(),c(o)})),e.fn.daterangepicker&&e(".bhs-timepicker").each((function(){i(this,"time")})),c(o),e(document).on("click","#rtclBookingCalendar .fc-scrollgrid-sync-table .fc-day",(function(t){var i=e(this),n=i.attr("data-date");if(!i.hasClass("fc-day-past")){var c=o.findIndex((function(e){return e===n}));c>=0?o.splice(c,1):o.push(n),i.toggleClass("disable"),l.val(o)}}));var a=e("#rtcl_listing_details #rtcl-category-wrap select"),r=0;a.each((function(){r=e(this).val()})),n(r),e(document).on("change","#rtcl-category-wrap select",(function(){n(e(this).val())}))})),e(document).on("click",".rtcl-booking-service-slots .rtcl-icon-plus",(function(t){t.preventDefault();var n=e(this),c=n.closest(".time-slot"),o=c.closest(".time-slots").find(".time-slot").length||0,l=e(c).clone();e(l).find("input[type='text']").each((function(){e(this).attr("name",e(this).attr("name").replace(/times\]\[([0-9]+)\]/i,"times]["+o+"]")),e(this).val("")})),e(l).find(".bhs-timepicker").each((function(){i(this,"time")})),n.removeClass("rtcl-icon-plus").addClass("rtcl-icon-minus"),e(c).after(e(l))})).on("click",".rtcl-booking-service-slots .rtcl-icon-minus",(function(t){if(t.preventDefault(),confirm(rtcl_business_hours.lang.confirm)){var i=e(this),n=i.closest(".time-slots");i.closest(".time-slot").remove(),n.find(".time-slot").each((function(t,i){e(this).find("input[type='text']").each((function(){e(this).attr("name",e(this).attr("name").replace(/times\]\[([0-9]+)\]/i,"times]["+t+"]"))}))}))}}))}(jQuery);
